## 1. 为什么我们需要身份验证

HTTP是一种"无状态"协议，这意味着每个HTTP调用都像是一次全新的调用，没有记忆或"状态"来记录之前的调用。

在应用程序中，通常需要维护登录会话，以便用户一旦登录，可以继续访问应用程序的不同部分，而不必为每个后续的HTTP请求重新登录（即进行身份验证）。

主要有两种不同的会话管理方法：
- 基于会话和Cookies的方法
- 基于JWT（JSON Web Tokens）的方法

## 2. 为什么使用基于令牌的身份验证而不是Session？

假设我们有一个通过Session正常运行的网站。有一天，我们想要为移动端实现一个系统，并且与当前的Web应用程序共享相同的数据库。我们应该怎么处理呢？问题在于我们无法使用基于会话的身份验证来认证移动端的用户，因为这些应用程序不支持Cookie。

那么，我们应该创建一个专门支持原生应用的后端项目吗？还是应该为原生应用用户编写一个独立的身份验证模块呢？

| 特点                               | Session                                       | Token                                            |
| ---------------------------------- | --------------------------------------------- | ------------------------------------------------- |
| 定义                               | 用于记录服务器和客户端会话状态的机制         | 令牌，用于访问资源接口（API）的资源凭证         |
| 服务器状态                        | 有状态化，服务端需要存储会话信息             | 无状态化，服务端不存储会话信息                   |
| 可扩展性                          | 适用于相对较小规模和单一平台的应用           | 更易扩展，适用于大量用户和多平台的应用，因为Token存储在客户端 |
| 服务器负载                        | 可能增加服务器负载，因为需要管理会话         | 减轻服务器负载，因为无需创建服务器端会话         |
| 存储需求                          | 需要存储会话信息，占用服务器存储空间         | 不需要存储会话信息，减少服务器存储负担             |
| 实现有状态会话的能力               | 适用，可以在服务器端保存状态信息             | 不直接适用，但仍然可以在服务器端实现有状态的会话   |
| 适用场景                          | 适用于某些需要保持会话状态的应用             | 适用于大规模、分布式、跨平台的应用，以及无需维护会话状态的情况 |
| 安全性                            | 需要额外的安全措施，如处理会话过期和会话劫持   | 使用适当的身份验证和令牌管理可提高安全性            |

## 3. JWT（JSON Web Token）

JWT是JSON Web Token的缩写。首先，您应该了解JWT的三个重要部分：
- Header（算法和令牌类型）
- Payload（数据）
- Signature（密钥签名）

## 4. 刷新令牌和访问令牌之间的区别

| 特征               | 访问令牌 (Access Token) | 刷新令牌 (Refresh Token) |
|-------------------|------------------------|-------------------------|
| 用途               | 用于访问受保护的资源，如API。 | 用于获取新的访问令牌，以保持用户的访问权限。          |
| 令牌生命周期        | 相对较短，通常在几分钟到几小时之间。  | 通常比访问令牌的生命周期更长，可以是天数或更长。      |
| 用户交互            | 需要用户进行身份验证和授权。      | 不需要用户交互，可以在访问令牌过期时自动获取新令牌。 |
| 安全性              | 较容易泄露，因为它的生命周期较短。    | 更安全，因为它通常保存在安全的位置，并且不频繁传输。    |
| 常用场景            | 用于实际访问资源，如获取用户数据。  | 用于维护用户的持续访问权限，减少用户频繁登录。        |
